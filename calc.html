<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>電卓</title>
</head>
<body>
<h3>電卓ver1.2.2</h3>
<hr>
<form name="calc">
<table border="2">
<tr>
<th colspan="4" align="right"><div id="output">0</div></th>
<th><div id="type"></div></th>
</tr>
<tr>
	<td><input type="button" value="7" onClick="calc_run(7)"></td>
	<td><input type="button" value="8" onClick="calc_run(8)"></td>
	<td><input type="button" value="9" onClick="calc_run(9)"></td>
	<td><input type="button" value="÷" onClick="calc_run('/')"></td>
	<td><input type="button" value="C" onClick="calc_reset()"></td>
</tr>
<tr>
	<td><input type="button" value="4" onClick="calc_run(4)"></td>
	<td><input type="button" value="5" onClick="calc_run(5)"></td>
	<td><input type="button" value="6" onClick="calc_run(6)"></td>
	<td><input type="button" value="×" onClick="calc_run('*')"></td>
</tr>
<tr>
	<td><input type="button" value="1" onClick="calc_run(1)"></td>
	<td><input type="button" value="2" onClick="calc_run(2)"></td>
	<td><input type="button" value="3" onClick="calc_run(3)"></td>
	<td><input type="button" value="-" onClick="calc_run('-')"></td>
</tr>
<tr>
	<td><input type="button" value="0" onClick="calc_run(0)"></td>
	<td><input type="button" value="." onClick="calc_period()"></td>
	<td><input type="button" value="＝" onClick="calc_equal()"></td>
	<td><input type="button" value="+" onClick="calc_run('+')"></td>
</tr>
</table>
</form>
<script src = "type.js"></script>
<script language="javascript">
	ans = 0;
	num = "0";
	key = "";
	kigou = "";

	function calc_run(btn){
		if(!isNaN(btn)){
			if(kigou == "="){
				ans = 0;
				kigou = "";
			}
			if(!isNaN(key)){
				if(num == "0"){
					num = ""+btn;
				}else{
					num += ""+btn;
				}
			}else{
				num = ""+btn;
			}
			document.getElementById("output").innerHTML = num;
		}else{
			if(!isNaN(key)){
				if(kigou == "")ans = num;
				else ans = eval(ans + kigou + num);
				num = "0";
				document.getElementById("output").innertHTML = ans;
			}
			kigou = btn;
			document.getElementById("type").innerHTML = kigou;
		}
		key = btn;
	}
	
	function calc_period(){
		if(num.indexOf(".") < 0)	num += ".";
		key = 0;
		document.getElementById("output").innerHTML = num;
	}
	
	function calc_equal(){
		if(kigou != ""){
			if(key == "="){
				ans = 0;
				key = "";
			}else{
				ans = eval(ans + kigou + num);
				key = "=";
			}
			num = "0"
			kigou = key
			document.getElementById("output").innerHTML = ans;
			document.getElementById("type").innerHTML =key;
		}
	}
	function calc_reset(){
		ans = 0;
		num = "0";
		key = "";
		kigou = "";
		document.getElementById("output").innerHTML = ans;
		document.getElementById("type").innerHTML =key;
	}
	typeCheck();
</script>
<div>ver1.2.2:Cボタンを押した時の処理を修正
<div>ver1.2.1:キーボードでの8と*との判定を修正
<div>ver1.2:リセットボタンの追加，キーボード入力に対応</div>
</body>
</html>	